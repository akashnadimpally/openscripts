Got it! Weâ€™ll modify the workflow to demonstrate **reading repository details** only, without creating branches or modifying anything. This is a safe way to showcase external integration with Azure Repos.

---

### **Workflow File: `azure-repos-read-integration.sw.yaml`**

```yaml
id: azure-repos-read-integration
version: '1.0'
specVersion: '0.8'
name: Azure Repos Read-Only Integration
description: Demonstrates external integration with Azure Repos by fetching repository details
dataInputSchema: schemas/azure-repos-read-integration__main-schema.json
functions:
  - name: getRepoDetails
    operation: specs/actions-openapi.json#getRepoDetails
  - name: logRepoDetails
    type: custom
    operation: sysout
start: Fetch Repository Details
states:
  - name: Fetch Repository Details
    type: operation
    actions:
      - name: Fetch Repo
        functionRef:
          refName: getRepoDetails
          arguments:
            orgName: ${.orgName}
            projectName: ${.projectName}
            repoName: ${.repoName}
        actionDataFilter:
          results: .repoDetails
    transition: Log Repository Details
  - name: Log Repository Details
    type: operation
    actions:
      - name: Log Repo
        functionRef:
          refName: logRepoDetails
          arguments:
            message: "Fetched repository details: ${.repoDetails}"
    end: true
```

---

### **Schema File: `azure-repos-read-integration__main-schema.json`**

Defines the input structure for the workflow:

```json
{
  "$id": "classpath:/schemas/azure-repos-read-integration__main-schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Azure Repos Read-Only Integration Schema",
  "type": "object",
  "properties": {
    "orgName": {
      "type": "string",
      "description": "The Azure DevOps organization name"
    },
    "projectName": {
      "type": "string",
      "description": "The Azure DevOps project name"
    },
    "repoName": {
      "type": "string",
      "description": "The repository name in Azure Repos"
    }
  },
  "required": ["orgName", "projectName", "repoName"]
}
```

---

### **OpenAPI Specification File: `actions-openapi.json`**

Defines the external API operation for fetching repository details:

```json
{
  "paths": {
    "/{organization}/{project}/_apis/git/repositories/{repositoryName}": {
      "get": {
        "operationId": "getRepoDetails",
        "summary": "Fetch repository details from Azure Repos",
        "parameters": [
          { "name": "organization", "in": "path", "required": true, "type": "string" },
          { "name": "project", "in": "path", "required": true, "type": "string" },
          { "name": "repositoryName", "in": "path", "required": true, "type": "string" }
        ],
        "responses": {
          "200": {
            "description": "Repository details fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "name": { "type": "string" },
                    "url": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
```

---

### **Configuration File: `application.properties`**

Sets the base URL for Azure DevOps REST API.

```properties
quarkus.rest-client.actions_openapi_json.url=https://dev.azure.com
```

---

### **Steps to Demonstrate**

1. **Input Data**:
   Use the following JSON input when starting the workflow:
   ```json
   {
     "orgName": "my-organization",
     "projectName": "my-project",
     "repoName": "my-repository"
   }
   ```

2. **Run the Workflow**:
   - The workflow calls the Azure DevOps REST API to fetch details about the specified repository.
   - Outputs the fetched details to the logs using the `logRepoDetails` function.

3. **Expected Output**:
   - Repository details are fetched and logged, including:
     - Repository ID
     - Repository Name
     - URL of the repository

4. **Validation**:
   Check the workflow logs or output to confirm the fetched details.

---

### **Why This Approach?**
- **Safe**: No changes are made to Azure Repos (e.g., no branches created or commits pushed).
- **Demonstrative**: Shows external integration capabilities by reading data.
- **Simple**: Only requires read access to Azure Repos.

Let me know if you need further assistance! ðŸ˜Š
